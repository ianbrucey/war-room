# Case Summary Output Schema

This is the required structure for `case_summary.md` files generated by `CaseSummaryGenerator`.

---

## Template

```markdown
# Case Summary

**Generated:** {ISO timestamp}
**Version:** {version number}
**Documents Processed:** {count}
**Status:** {generated | stale}

---

## 1. Case Overview

### Caption
- **Plaintiff(s):** {comma-separated names}
- **Defendant(s):** {comma-separated names}
- **Court:** {court name if known, otherwise "Unknown"}
- **Case Number:** {case number if known, otherwise "Not assigned"}

### Nature of Case
{1-2 paragraph summary of what the case is about, including cause of action}

---

## 2. Parties

| Party Name | Role | First Appearance | Documents Mentioning |
|------------|------|------------------|---------------------|
| {name} | {Plaintiff/Defendant/Witness/etc.} | {document filename} | {count} |

---

## 3. Claims & Causes of Action

### Identified Claims
1. **{Claim Type}** (e.g., Negligence, Breach of Contract)
   - **Elements:** {brief list of legal elements}
   - **Supporting Documents:** {list of relevant doc names}
   - **Strength Assessment:** {Strong/Moderate/Weak/Insufficient Evidence}

---

## 4. Key Facts (Undisputed)

| Date | Event | Source Document | Confidence |
|------|-------|-----------------|------------|
| {YYYY-MM-DD} | {event description} | {doc filename} | {High/Medium/Low} |

---

## 5. Disputed Facts

| Fact | Document A Says | Document B Says | Resolution Needed |
|------|-----------------|-----------------|-------------------|
| {description} | {version 1} | {version 2} | {Yes/No} |

*If no disputed facts: "No disputed facts identified at this time."*

---

## 6. Timeline

{Chronological narrative of events in paragraph form, with dates bolded}

**{Date 1}:** Event description...

**{Date 2}:** Event description...

---

## 7. Evidence Index

| Document | Type | Key Content | Relevance |
|----------|------|-------------|-----------|
| {filename} | {Complaint/Motion/Evidence/etc.} | {2-3 sentence summary} | {High/Medium/Low} |

---

## 8. Relief Sought

{Paragraph describing what the plaintiff is asking for: damages, injunction, etc.}

- **Compensatory Damages:** {amount if specified, otherwise "Unspecified"}
- **Punitive Damages:** {Yes/No/Unknown}
- **Injunctive Relief:** {description if applicable}
- **Attorney's Fees:** {Yes/No}

---

## 9. Open Questions

- [ ] {Question that needs clarification from client}
- [ ] {Missing document or information}
- [ ] {Legal research needed}

*If no open questions: "No critical open questions at this time."*

---

## 10. Agent Notes

{Any observations, warnings, or recommendations for the attorney reviewing this case}

*Examples:*
- Potential statute of limitations issues
- Contradictions that need resolution
- Suggested next steps
- Missing critical documents

---

## Metadata

```json
{
  "schema_version": "1.0",
  "generated_at": "{ISO timestamp}",
  "generator": "CaseSummaryGenerator v1",
  "model": "gemini-2.5-flash",
  "documents_included": ["{doc_id_1}", "{doc_id_2}"],
  "document_count": {number},
  "last_document_processed": "{doc_id}",
  "processing_method": "hierarchical_5_batch",
  "batch_count": {number},
  "processing_time_ms": {number}
}
```
```

---

## Validation Rules

1. **All 10 sections must be present** (even if empty with placeholder text)
2. **Dates must be YYYY-MM-DD format** in tables
3. **Party names must be consistent** across all sections
4. **Document references must match actual filenames**
5. **Metadata JSON block must be valid JSON**
6. **No hallucinated facts** - every fact must cite a source document

---

## Gemini Prompt Instructions

When generating the summary, include these instructions:

```
OUTPUT RULES:
1. Follow the exact section structure provided
2. Use ONLY facts from the provided metadata files
3. Cite document filenames for every fact
4. If information is missing, use placeholder text like "Unknown" or "Not specified"
5. Do NOT invent or assume facts not in the documents
6. Mark confidence as "Low" if derived from ambiguous text
7. The Metadata JSON block MUST be valid JSON
```

